<div class="row" style="height:375px;margin:0; padding:0;background-color: #FFFFFF;">
    <div class="col-xs-12 col-md-12 col-lg-12" style="height: 100%;width: 100%;margin:0; padding:0;">
        <form class="layui-form" id="app_publish_form" action="{:url('app/version/publish')}">
            <div class="layui-field-box">
                <div class="layui-form-item">
                    <label for="app_id" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">选择应用: </label>
                    <div class="layui-input-inline">
                        <select id="app_id" name="app_id">
                            <option value="">请选择</option>
                            {foreach name='apps' item='a'}
                            {php}$selected = $app_id==$a['id']?"selected":"";{/php}
                            <option value="{$a['app_id']}" {$selected}>{$a['app_name']}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="version_type" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">版本属性: </label>
                    <div class="layui-input-inline">
                        <select id="version_type" name="version_type">
                            <option value="release">正式版(release)</option>
                            <option value="rc">预览版(rc)</option>
                            <option value="beta">公测版(beta)</option>
                            <option value="alpha">内测版(alpha)</option>
                            <option value="base">初始版(base)</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="update_type" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">更新类别: </label>
                    <div class="layui-input-inline">
                        <select id="update_type" name="update_type" >
                            <option value="0">修订版更新(debug)</option>
                            <option value="1">次版本更新(功能性)</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="app_version" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">版本号预览: </label>
                    <div class="layui-input-inline">
                        <input readonly id="app_version" class="layui-input " name="app_version" value="{$version['version']}">
                        <input id="app_build" class="layui-input " style="margin-top: 10px;" name="app_build" value="{$version['build']}">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="app_key" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">APP_KEY: </label>
                    <div class="layui-input-inline">
                        <input readonly id="app_key" class="layui-input" style="width: 250px;" name="app_key" value="{$app_key}">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="app_key" class="layui-form-label layui-form-label col-xs-4 col-sm-4 col-md-4">版本描述: </label>
                    <div class="layui-input-inline">
                        <textarea id="remark" class="layui-input" style="width: 250px;height: 200px;" name="remark" ></textarea>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script type="application/javascript">
    layui.use(['jquery','element','form'],function() {
        var form = layui.form;
        window.jQuery = window.$ = layui.jquery;
        form.on('select', function () {
            getVersion();
        });
    });
    function getVersion() {
        var version_type = $("#version_type").val();
        var update_type  = $("#update_type").val();
        var app_id = $("#app_id").val();
        var url = "{:url('app/version/getVersion')}";
        $.post(url,{app_id:app_id,version_type:version_type,update_type:update_type},function (res) {
            $("#app_version").val(res.data.version);
            $("#app_build").val(res.data.build);
        });
    }
</script>