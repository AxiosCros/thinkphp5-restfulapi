{layout name="layout" /}
{php}$title = "应用热度值"{/php}
{include file="public:header" }
<script type="application/javascript" src="/echarts.min.js"></script>
<div id="container">
    {include file="public:menu" }
    <div id="content">
        <div class="container">
            {include file="public:nav" }
            <div class="page-header"></div>
            <div class="row" >
                <div class="col-md-12">
                    <div class="widget box" >
                        <div class="widget-header">
                            <h4>功能</h4>
                        </div>
                        <div class="widget-content">
                            <a href="{:url('application/statistics/hot')}?len=7" class="btn btn-info" onclick="" >最近一周</a>
                            <a href="{:url('application/statistics/hot')}?len=15" class="btn btn-info" onclick="" >最近15天</a>
                            <a href="{:url('application/statistics/hot')}?len=30" class="btn btn-info" onclick="" >最近30天</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <canvas id="main" width="1200" height="580"></canvas>
            </div>
        </div>
    </div>
</div>
<script type="application/javascript">
    // 基于准备好的dom，初始化echarts实例
    var app = echarts.init(document.getElementById('main'));
    var len = "{$len}";
    // 指定图表的配置项和数据
    var option = {
        title: {
            show:false,
        },
        tooltip: {},
        legend: {
            data:[]
        },
        xAxis: {
            data: []
        },
        yAxis: {},
        series: []
    };
    var url = "{:url('application/statistics/allVersion')}";
    $.post(url,{len:len},function (res) {

        option.legend.data = res.legend.data;
        option.xAxis.data = res.x.data;
        option.series = res.series;
        app.setOption(option);
    });
    // 使用刚指定的配置项和数据显示图表。

    console.log(app.option);
</script>